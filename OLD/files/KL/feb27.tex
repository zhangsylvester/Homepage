\begin{lemma}
	$w$ is $321$-avoiding if and only if any two occurrences of $s_i$ in a reduced word of $w$ are separated by both $s_{i-1}$ and $s_{i+1}$.
\end{lemma}
\begin{proof}
	Assume $w$ is $321$-avoiding. Choose $\cdots s_i\cdots s_i\cdots$ as close as possible. Then one $s_{i\pm 1}$ must separate them: $\cdots s_i\cdots s_{i\pm 1}\cdots s_i\cdots$.
\end{proof}
Let $\xi=s_{i_1}\cdots s_{i_l}$ be an expression and $a_{i_1}\cdots a_{i_l}$ where $a_{i_j}\in\{s_{i_j},1\}$ a subexpression.

Recall that $j$ is a defect if $a_{i_1}\cdots a_{i_{j-1}}$ has right descent $s_{i_j}$. Let $P_x(\xi)$ denote the set of all subexpression of $\xi$ with product $x$, and $D(a)$ to be the defects of $a$.

\begin{example}
	Let $\xi=s_3s_2s_1s_4s_3s_2s_5s_4s_3$, and $x=s_1s_3s_5$.
	
	\begin{tabular}{|c|c|}
	\hline
	$P_x(\xi)$&$D(a)$\\
	\hline
	$--s_1---s_5-s_3$&$\emptyset$\\
	$--s_1-s_3-s_5--$&9\\
	$s_3-s_2---s_5--$&5,9\\
	$s_3-s_1-s_3-s_5-s_3$&5\\
	\hline
	\end{tabular}
\end{example}
\begin{theorem}[Deodhar] Coefficients of $T_x$ in $C'_{s_i}\cdots C'_{s_l}$ is given by $P_{x,\xi}^*=\sum_{a\in P_x(\xi)} q^{|D(a)|}$.\footnote{Note that $P_{x,\xi}$ is not exactly the Kazhdan-Lusztig polynomial. However we should think about it as someone who wants to e KL polynomial, and in many cases, it is.}
\end{theorem}
\begin{example}
	$\xi=s_1s_2s_1$. 
	$$(T_{s_1}+1)(T_{s_2}+1)(T_{s_1}+1)=T_{s_1s_2s_1}+T_{s_1s_2}+T_{s_2s_1} +(q+1)T_{s_1}+T_{s_2}+(q+1)
	$$
\end{example}