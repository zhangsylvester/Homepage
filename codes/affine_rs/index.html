<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Affine Growth Diagram</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <!-- Using a recent stable version of PyScript, e.g., 2024.1.1. Check for the latest stable version. -->
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
  <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
  <py-config>
    # Using inline TOML configuration
    packages = ["matplotlib"]
  </py-config>
  <style>
    body {
      /* Bootstrap handles font-family. Add any global overrides here if needed. */
      padding-top: 1rem; /* Add some space at the top */
    }
    /* Custom styles for the result pre tag */
    #result {
      white-space: pre-wrap; /* Allow text to wrap within the pre tag */
      overflow-x: auto; /* Add horizontal scroll if content is too wide */
      background-color: #f4f4f4; /* Optional: light background for readability */
      padding-top: 0; /* Align text content with the top of the diagram box */
      padding-right: 10px; padding-bottom: 10px; padding-left: 10px; /* Keep other paddings */
      border: 1px solid #ddd;
      min-height: 200px; /* Ensure it has some height even when empty */
      max-height: 600px; /* Limit height and make it scrollable if content exceeds */
      overflow-y: auto;
    }
    /* Ensure plots within columns don't cause overflow issues if too wide */
    #diagram-output-area img {
        width: 100%; /* Force image to take full width of its container */
        height: auto;
        display: block; /* Removes any extra space below the image if it's inline */
        object-fit: contain; /* Ensures the entire image is visible, scaled down if necessary, maintaining aspect ratio */
    }
  </style>
</head>
<body>
  <div class="container-fluid">
    <h1 class="mb-3">Affine Growth Diagram</h1>

    <div class="row mb-3 align-items-end">
      <div class="col-md-auto">
        <label for="perm" class="form-label">Affine permutation (comma-separated):</label>
        <input id="perm" class="form-control" style="width: 280px;" placeholder="e.g. 3,7,0,-1,6" />
      </div>
      <div class="col-md-auto">
        <button id="run" class="btn btn-primary" py-click="run_app">Run</button>
      </div>
      <div class="col-md-auto">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="toggleEdgeLabels">
          <label class="form-check-label" for="toggleEdgeLabels">
            Show Edge Labels
          </label>
        </div>
      </div>
    </div>

    <div class="row align-items-start">
      <div class="col-lg-8 col-md-7" id="diagram-output-area">
        <!-- Plots will be dynamically inserted here by PyScript -->
      </div>
      <div class="col-lg-4 col-md-5" style="padding-top:-20px">
        <pre id="result" ></pre>
      </div>
    </div>
  </div>
  <script type="py" src="./affine_RS.py"></script>
</body>
</html>
